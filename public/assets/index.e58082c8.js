import{w as m}from"./window.2b53b05b.js";import{c as C}from"./iframe.af71a2c2.js";var T=m.LOGLEVEL,l=m.console,f={trace:1,debug:2,info:3,warn:4,error:5,silent:10},P=T,g=f[P]||f.info,L={trace:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return g<=f.trace&&l.trace.apply(l,[t].concat(n))},debug:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return g<=f.debug&&l.debug.apply(l,[t].concat(n))},info:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return g<=f.info&&l.info.apply(l,[t].concat(n))},warn:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return g<=f.warn&&l.warn.apply(l,[t].concat(n))},error:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return g<=f.error&&l.error.apply(l,[t].concat(n))},log:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return g<f.silent&&l.log.apply(l,[t].concat(n))}},y=new Set,u=function(t){return function(e){if(!y.has(e)){y.add(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return L[t].apply(L,[e].concat(r))}}};u.clear=function(){return y.clear()};u.trace=u("trace");u.debug=u("debug");u.info=u("info");u.warn=u("warn");u.error=u("error");u.log=u("log");var $=R;function R(a,t){if(w("noDeprecation"))return a;var e=!1;function n(){if(!e){if(w("throwDeprecation"))throw new Error(t);w("traceDeprecation")?console.trace(t):console.warn(t),e=!0}return a.apply(this,arguments)}return n}function w(a){try{if(!C.localStorage)return!1}catch{return!1}var t=C.localStorage[a];return t==null?!1:String(t).toLowerCase()==="true"}function D(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=Array.from(typeof a=="string"?[a]:a);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var r=n.reduce(function(s,h){var c=h.match(/\n([\t ]+|(?!\s).)/g);return c?s.concat(c.map(function(p){var v,d;return(d=(v=p.match(/[\t ]/g))===null||v===void 0?void 0:v.length)!==null&&d!==void 0?d:0})):s},[]);if(r.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,r)+"}","g");n=n.map(function(s){return s.replace(i,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return t.forEach(function(s,h){var c=o.match(/(?:^|\n)( *)$/),p=c?c[1]:"",v=s;typeof s=="string"&&s.includes(`
`)&&(v=String(s).split(`
`).map(function(d,j){return j===0?d:""+p+d}).join(`
`)),o+=v+n[h+1]}),o}var A;function x(a,t){return t||(t=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(t)}}))}function I(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function O(a,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function M(a,t,e){return t&&O(a.prototype,t),e&&O(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}var V=function(){return Math.random().toString(16).slice(2)},G=function(){function a(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.transport,r=e.async,i=r===void 0?!1:r;I(this,a),this.isAsync=void 0,this.sender=V(),this.events={},this.data={},this.transport=void 0,this.addPeerListener=$(function(o,s){t.addListener(o,s)},D(A||(A=x([`
      channel.addPeerListener is deprecated
    `])))),this.isAsync=i,n&&(this.transport=n,this.transport.setHandler(function(o){return t.handleEvent(o)}))}return M(a,[{key:"hasTransport",get:function(){return!!this.transport}},{key:"addListener",value:function(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)}},{key:"emit",value:function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var s={type:e,args:i,from:this.sender},h={};i.length>=1&&i[0]&&i[0].options&&(h=i[0].options);var c=function(){n.transport&&n.transport.send(s,h),n.handleEvent(s)};this.isAsync?setImmediate(c):c()}},{key:"last",value:function(e){return this.data[e]}},{key:"eventNames",value:function(){return Object.keys(this.events)}},{key:"listenerCount",value:function(e){var n=this.listeners(e);return n?n.length:0}},{key:"listeners",value:function(e){var n=this.events[e];return n||void 0}},{key:"once",value:function(e,n){var r=this.onceListener(e,n);this.addListener(e,r)}},{key:"removeAllListeners",value:function(e){e?this.events[e]&&delete this.events[e]:this.events={}}},{key:"removeListener",value:function(e,n){var r=this.listeners(e);r&&(this.events[e]=r.filter(function(i){return i!==n}))}},{key:"on",value:function(e,n){this.addListener(e,n)}},{key:"off",value:function(e,n){this.removeListener(e,n)}},{key:"handleEvent",value:function(e){var n=this.listeners(e.type);n&&n.length&&n.forEach(function(r){r.apply(e,e.args)}),this.data[e.type]=e.args}},{key:"onceListener",value:function(e,n){var r=this,i=function o(){return r.removeListener(e,o),n.apply(void 0,arguments)};return i}}]),a}(),H=G;function z(){var a={setHandler:function(){},send:function(){}};return new H({transport:a})}var E;(function(a){a.TAB="tab",a.PANEL="panel",a.TOOL="tool",a.TOOLEXTRA="toolextra",a.PREVIEW="preview",a.NOTES_ELEMENT="notes-element"})(E||(E={}));function S(a,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function B(a,t,e){return t&&S(a.prototype,t),e&&S(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function K(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var N=B(function a(){var t=this;K(this,a),this.loaders={},this.elements={},this.config={},this.channel=void 0,this.serverChannel=void 0,this.promise=void 0,this.resolve=void 0,this.getChannel=function(){return t.channel||t.setChannel(z()),t.channel},this.getServerChannel=function(){if(!t.serverChannel)throw new Error("Accessing non-existent serverChannel");return t.serverChannel},this.ready=function(){return t.promise},this.hasChannel=function(){return!!t.channel},this.hasServerChannel=function(){return!!t.serverChannel},this.setChannel=function(e){t.channel=e,t.resolve()},this.setServerChannel=function(e){t.serverChannel=e},this.getElements=function(e){return t.elements[e]||(t.elements[e]={}),t.elements[e]},this.addPanel=function(e,n){t.add(e,Object.assign({type:E.PANEL},n))},this.add=function(e,n){var r=n.type,i=t.getElements(r);i[e]=Object.assign({id:e},n)},this.setConfig=function(e){Object.assign(t.config,e)},this.getConfig=function(){return t.config},this.register=function(e,n){t.loaders[e]&&L.warn("".concat(e," was loaded twice, this could have bad side-effects")),t.loaders[e]=n},this.loadAddons=function(e){Object.values(t.loaders).forEach(function(n){return n(e)})},this.promise=new Promise(function(e){t.resolve=function(){return e(t.getChannel())}})}),b="__STORYBOOK_ADDONS";function Y(){return m[b]||(m[b]=new N),m[b]}var q=Y();export{q as a,$ as b,D as d,L as l,u as o};
//# sourceMappingURL=index.e58082c8.js.map
